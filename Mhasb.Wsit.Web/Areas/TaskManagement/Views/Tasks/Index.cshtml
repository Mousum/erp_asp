@model IEnumerable<Mhasb.Domain.Organizations.Project>
@{
    ViewBag.Title = "Index";
    Layout = "~/Areas/UserManagement/Views/Shared/_mhasbLayout.cshtml";
}

<div class="container">
    <div class="row clearfix">
        <div class="col-md-12 column">
            <h2 class="text-left task-title">
                Tasks
            </h2>
            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#pop-up-1">
                Add New Project
            </button>
            <div id="alert"></div>
            <table class="table table-bordered table-hover table-condensed data-table">
                <thead>
                    <tr class="table-header">
                        <th>#</th>
                        <th>Project Name</th>
                        <th>Project Leader</th>
                        <th>Members Number</th>
                        <th>Project Date</th>
                        <th>Starting Date</th>
                        <th>Finishing Date</th>
                        <th>Tasks Number</th>
                    </tr>
                </thead>
                <tbody>
                    @if (!Model.Any())
                    {
                        <tr class="success">
                            <td colspan="8">
                                <b class="alert-info" style="float:inherit;"> There Are No Project Created</b>
                            </td>
                        </tr>
                    }
                    else
                    {
                        foreach (var item in Model)
                        {
                            <tr class="success">
                                <td>2</td>
                                <td>@item.ProjectName</td>
                                <td>@item.ManagerId</td>
                                <td>@item.NumberOfMember</td>
                                <td>@item.ProjectDate</td>
                                <td>@item.StartingDate</td>
                                <td>@item.FinishingDate</td>
                                <td>@item.TaskNumber</td>
                            </tr>
                        }
                    }
                  
                </tbody>
            </table>
        </div>
    </div>
</div>
<div class="container">
    <div class="row clearfix">
        <div class="col-md-12 column">
            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#pop-up-2">Add New Task</button>
            <table class="table table-bordered table-hover table-condensed data-table">
                <thead>
                    <tr class="table-header">
                        <th>#</th>
                        <th>Product</th>
                        <th>Payment Taken</th>
                        <th>Status</th>
                        <th>Product</th>
                        <th>Payment Taken</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="danger">
                        <td>2</td>
                        <td>TB - Monthly</td>
                        <td>02/04/2012</td>
                        <td>Declined</td>
                        <td>TB - Monthly</td>
                        <td>02/04/2012</td>
                        <td>Declined</td>
                    </tr>
                    <tr class="warning">
                        <td>3</td>
                        <td>TB - Monthly</td>
                        <td>03/04/2012</td>
                        <td>Pending</td>
                        <td>TB - Monthly</td>
                        <td>03/04/2012</td>
                        <td>Pending</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<!-- Pop Up Add New Project -->

<div class="modal fade" id="pop-up-1" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header cstm-pop-up-header">
                <button type="button" class="close pop-cross" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title sign-up-title" id="myModalLabel">Add New Project</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-12">
                        <label>Project Name</label><input class="form-control" type="text" id="prjName" />
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12 label-marg">
                        <label>Leader</label>
                        @Html.DropDownList("ManagerId", (SelectList)ViewBag.Employess, "--Select Leader--", htmlAttributes: new { @class = "form-control", id = "mId", required = "required" })
                    </div>

                </div>
                <div class="row">
                    <div class="col-md-6">
                        <label>Starting Date</label>
                        <div class="form-group">
                            <div class='input-group date' id='datetimepicker1'>
                                <input type='text' class="form-control" id="start" />
                                <span class="input-group-addon">
                                    <span class="glyphicon glyphicon-calendar"></span>
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 label-marg">
                        <label>Finish Date</label>
                        <div class="form-group">
                            <div class='input-group date' id='datetimepicker2'>
                                <input type='text' class="form-control" id="finish" />
                                <span class="input-group-addon">
                                    <span class="glyphicon glyphicon-calendar"></span>
                                </span>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="prjCreate">Create</button>
            </div>
        </div>
    </div>
</div>
<!-- Pop Up Add New Project -->
<!-- Pop Up Add New Task -->
<div class="modal fade" id="pop-up-2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header cstm-pop-up-header">
                <button type="button" class="close pop-cross" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title sign-up-title" id="myModalLabel">Sign Up</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-6">
                        <label>First Name</label><input class="form-control" type="email" />
                    </div>
                    <div class="col-md-6">
                        <label>Last Name</label><input class="form-control" type="email" />
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12 label-marg">
                        <label>Email address</label><input class="form-control" type="email" />
                    </div>
                    <div class="col-md-12">
                        <div class="checkbox">
                            <label><input type="checkbox" /> Remember me</label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary">Sign Up</button>
            </div>
        </div>
    </div>
</div>
<!-- Pop Up Add New Task -->

<script type="text/javascript">

    $(document).ready(function () {

        //   $('#datetimepicker1').datetimepicker();
        $('#datetimepicker1').datepicker();
        $('#datetimepicker2').datepicker();

        $("#prjCreate").click(function () {

            if ($("#prjName").val() == "") {
                $("#prjName").focus();
                $("#prjName").css("border-color", "red");
            }
            else if ($("#mId").val() == "") {
                $("#mId").focus();
                $("#mId").css("border-color", "red");
            }
            else if ($("#start").val() == "") {
                $("#start").focus();
                $("#start").css("border-color", "red");
            }
            else if ($("#finish").val() == "") {
                $("#finish").focus();
                $("#finish").css("border-color", "red");
            }
            else {
                var baseUrl = '@Url.Content("~/")';
                var data = { ProjectName: $("#prjName").val(), ManagerId: $("#mId").val(), StartingDate: $("#start").val(), FinishingDate: $("#finish").val() };
                $.ajax({
                    type: "POST",
                    url: baseUrl + "TaskManagement/Tasks/CreateProject",
                    data: data,
                    success: function (data) {
                        if (data == "Success") {
                            $("#prjName").val() = "";
                            $("#mId").val() = "";
                            $("#start").val() = "";
                            $("#finish").val() = "";
                            $('.close').trigger('click');
                            $("#alert").html(" <b class='alert-success'>Project Successfully Added!Loading New Data...</b>");
                            setTimeout(function () {
                                window.location.replace(baseUrl + "TaskManagement/Tasks/");//will redirect to your blog page (an ex: blog.html)
                            }, 3000);
                        }
                    }
                });
            }
            
            
        });
    });
</script>